# Task ID: 7
# Title: HIGH: Fix O(n) Shape Lookup in Hot Path
# Status: pending
# Dependencies: None
# Priority: high
# Description: Replace linear search with O(1) Map lookup for getShapeById callback
# Details:
**File:** `src/routes/canvas/+page.svelte:347`

**Problem:** `$shapes.find()` called on every mouse event (O(n) with 500 shapes)

**Steps:**
1. Add derived shapesMap: `let shapesMap = $derived(new Map($shapes.map(s => [s.id, s])));`
2. Change getShapeById callback to use Map: `return shapesMap.get(id);`

**Impact:** 10-15ms saved per interaction with 500 shapes

# Test Strategy:

